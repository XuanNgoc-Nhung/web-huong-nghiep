<!-- Modal Thanh Toán & Modal Thành Công (dùng chung) -->
<style>
  #paymentModal .modal-content {
    font-size: 0.89rem;
    padding: 0;
  }
  #paymentModal .modal-header, #paymentModal .modal-body {
    padding: 12px 10px 10px 16px !important;
  }
  #paymentModal .pay-method-btn {
    font-size: 0.98rem;
    font-weight: 600;
    border-radius: 10px;
    padding: 8px 0;
    border: 2px solid #e0e7ef;
    background: #f8fafc;
    color: #22c55e;
    transition: all 0.2s;
  }
  #paymentModal .pay-method-btn.active {
    background: #22c55e;
    color: #fff;
    border-color: #22c55e;
    box-shadow: 0 2px 8px rgba(34,197,94,0.08);
  }
  #paymentModal .pay-method-btn i {
    margin-right: 5px;
  }
  #paymentModal .pay-guide {
    font-size: 0.89rem;
    margin-bottom: 0.5rem;
  }
  #paymentModal .alert {
    padding: 8px 10px;
    margin-bottom: 8px;
  }
  #paymentModal .border.rounded-3.p-2 {
    padding: 6px 10px !important;
    font-size: 0.89rem;
  }
  #paymentModal .mt-2, #paymentModal .mb-2, #paymentModal .mt-3, #paymentModal .mt-4 {
    margin-top: 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  #paymentModal .spinner-border {
    width: 1rem;
    height: 1rem;
  }
</style>
<div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content" style="border-radius: 20px;">
      <div class="modal-header" id="paymentModalHeader">
        <h5 class="modal-title" id="paymentModalLabel" style="font-weight: bold; color: #22c55e; font-size: 1.2rem;">
          <i class="fa fa-check-circle" style="color: #22c55e;"></i> CareerTest
        </h5>
        {{!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="paymentModalCloseBtn"></button> --}}
      </div>
      <div class="modal-body" style="padding: 24px 16px;">
        <div style="font-size: 1.05rem; font-weight: 600; color: #e11d48; margin-bottom: 8px;">
          <i class="fa fa-heart"></i> Đã hoàn tất phân tích!
        </div>
        <div style="margin-bottom: 12px; font-size: 0.98rem;">Hệ thống đã phân tích xong kết quả. Để xem kết quả đầy đủ, vui lòng thanh toán <b>15.000 đồng</b>.</div>
        <div class="row mb-3">
          <div class="col-6">
            <button id="btnPayBank" class="pay-method-btn w-100 active" type="button">
              <i class="fa fa-qrcode"></i> Chuyển khoản (QR code)
            </button>
          </div>
          <div class="col-6">
            <button id="btnPaySMS" class="pay-method-btn w-100" type="button">
              <i class="fa fa-sms"></i> SMS
            </button>
          </div>
        </div>
        <div id="payGuideBank" class="pay-guide">
          <div class="alert alert-light border" style="font-size: 0.97rem;">
            <b>Lưu ý khi chuyển khoản thanh toán:</b>
            <ol style="margin-bottom: 0; padding-left: 18px;">
              <li>Nội dung chuyển khoản chính xác<br><span style="font-size: 0.97rem;">Vui lòng ghi đúng cú pháp: <b>HN15 [SĐT của bạn]</b> trong phần nội dung chuyển khoản. Ví dụ: HN15 0987654321.</span></li>
              <li>Chuyển đúng số tiền<br><span style="font-size: 0.97rem;">Số tiền thanh toán: <b>15.000 đồng/lượt xem kết quả</b>.</span></li>
              <li>Thời gian xử lý<br><span style="font-size: 0.97rem;">Hệ thống thường xác nhận tự động trong 1–2 phút.<br>Nếu sau 5 phút chưa mở kết quả, bạn có thể liên hệ hỗ trợ để kiểm tra.</span></li>
            </ol>
          </div>
          <div class="row mt-2">
            <div class="col-md-7 mb-3 mb-md-0">
              <div class="border rounded-3 p-2" style="background: #f8fafc;">
                <div class="mb-1"><b>Ngân hàng:</b> Ngân hàng Techcombank</div>
                <div class="mb-1"><b>Số tài khoản:</b> 19025379802021 <button class="btn btn-link btn-sm py-0 px-1" onclick="navigator.clipboard.writeText('19025379802021')">Sao chép</button></div>
                <div class="mb-1"><b>Chủ tài khoản:</b> DUONG MANH QUAN</div>
                <div class="mb-1"><b>Số tiền:</b> 15.000 đồng</div>
                <div class="mb-1"><b>Nội dung:</b> HN15 0987654321 <button class="btn btn-link btn-sm py-0 px-1" onclick="navigator.clipboard.writeText('HN15 0987654321')">Sao chép</button></div>
              </div>
            </div>
            <div class="col-md-5 d-flex align-items-center justify-content-center">
              <img src="/images/svg/qr-code.svg" alt="QR code" style="width: 120px; height: 120px; border-radius: 10px; border: 1.5px solid #e0e7ef;">
            </div>
          </div>
        </div>
        <div id="payGuideSMS" class="pay-guide" style="display:none;">
          <div class="alert alert-light border" style="font-size: 0.97rem;">
            <b>Lưu ý khi nhắn tin SMS thanh toán:</b>
            <ol style="margin-bottom: 0; padding-left: 18px;">
              <li>Soạn đúng cú pháp tin nhắn<br><span style="font-size: 0.97rem;">Vui lòng ghi đúng cú pháp: <b>HN15 [SĐT của bạn] gửi 888</b>. Ví dụ: HN15 0987654321 gửi 888.<br>Trong đó HN15 là mã dịch vụ, 888 là đầu số tổng đài.</span></li>
              <li>Sử dụng số điện thoại chính chủ<br><span style="font-size: 0.97rem;">Kết quả sẽ được mở khóa theo số điện thoại đã gửi tin nhắn, vui lòng sử dụng đúng SĐT bạn đăng ký trên hệ thống.</span></li>
              <li>Thời gian xử lý<br><span style="font-size: 0.97rem;">Hệ thống thường xác nhận tự động trong 1–2 phút.<br>Nếu sau 5 phút chưa mở kết quả, bạn có thể liên hệ hỗ trợ để kiểm tra.</span></li>
            </ol>
          </div>
          <div class="mt-2 mb-2" style="font-size: 1.25rem; text-align: center; font-weight: bold; letter-spacing: 1px;">
            HN15 [SĐT của bạn] gửi 888
          </div>
        </div>
        <div class="mt-3" style="font-size: 0.97rem;">
          <b>Liên hệ:</b> <br>
          <i class="fa fa-phone"></i> 0993 588 883 <br>
          <i class="fa fa-envelope"></i> careertest.com.vn@gmail.com
        </div>
        <div class="text-center mt-3" style="color: #64748b; font-size: 0.97rem;">
          <span class="spinner-border spinner-border-sm"></span> Đang chờ bạn thanh toán...
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal Thanh toán thành công -->
<div class="modal fade" id="paymentSuccessModal" tabindex="-1" aria-labelledby="paymentSuccessModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content" style="border-radius: 20px; text-align: center;">
      <div class="modal-body" style="padding: 48px 24px;">
        <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 24px;"><circle cx="40" cy="40" r="40" fill="#22c55e" fill-opacity="0.15"/><circle cx="40" cy="40" r="32" fill="#22c55e"/><path d="M26 41.5L36 51L54 33" stroke="#fff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <h2 style="color: #22c55e; font-weight: bold;">Thanh toán thành công!</h2>
        <p>Bạn đã thanh toán thành công.</p>
        <button class="btn btn-success mt-3" data-bs-dismiss="modal">Xem kết quả ngay</button>
      </div>
    </div>
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Luôn luôn không cho phép đóng modal bằng ESC hoặc click ra ngoài
    var paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'), {
      backdrop: 'static',
      keyboard: false
    });
    paymentModal.show();
    // Ẩn nút đóng nếu có
    var closeBtn = document.getElementById('paymentModalCloseBtn');
    if (closeBtn) closeBtn.style.display = 'none';

    // Xử lý chuyển đổi hướng dẫn thanh toán
    var btnPayBank = document.getElementById('btnPayBank');
    var btnPaySMS = document.getElementById('btnPaySMS');
    var payGuideBank = document.getElementById('payGuideBank');
    var payGuideSMS = document.getElementById('payGuideSMS');
    btnPayBank.addEventListener('click', function() {
      btnPayBank.classList.add('active');
      btnPaySMS.classList.remove('active');
      payGuideBank.style.display = '';
      payGuideSMS.style.display = 'none';
    });
    btnPaySMS.addEventListener('click', function() {
      btnPaySMS.classList.add('active');
      btnPayBank.classList.remove('active');
      payGuideBank.style.display = 'none';
      payGuideSMS.style.display = '';
    });

    // Listen for Cmd + T keyboard shortcut
    document.addEventListener('keydown', function(event) {
      if ((event.metaKey || event.ctrlKey) && event.key === 't') {
        event.preventDefault(); // Prevent default browser behavior
        var paymentModalEl = document.getElementById('paymentModal');
        var paymentModalInstance = bootstrap.Modal.getInstance(paymentModalEl);
        if (paymentModalInstance) paymentModalInstance.hide();
        var paymentSuccessModal = new bootstrap.Modal(document.getElementById('paymentSuccessModal'));
        paymentSuccessModal.show();
      }
    });
  });
</script> 